
<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @chatroom.name %>
</p>

<%= link_to 'Edit', edit_chatroom_path(@chatroom) %> |
<%= link_to 'Back', chatrooms_path %>


<div data-behavior='messages' data-chatroom-id='<%= @chatroom.id %>'>
  <% @messages.each do |message| %>
    <%= render message %>
    <% end %>
  <%= form_for [@chatroom, Message.new], html: {:id=>'body_form'} do |f| %>
    <%= f.text_area :body, rows: 1, class: "form-control", autofocus: true,
        :id => "body" %>
  <% end %>
</div>

<script type="text/javascript">
  // This script should come after the id is defined.
  document.getElementById('body').onkeypress =
    function(e){
      if ( e && (e.keyCode == 13) )
      {
        e.preventDefault();
        document.getElementById('body_form').submit()
      }
    };
</script>
